apiVersion:  apps/v1
kind:  Deployment
metadata:
   name:  catalog
    namespace: archref
spec:
    replicas: 2
    selector:
       matchLabels:
          app:  catalog
    template:
       metadata:
          labels:
              app:  catalog
       spec:
           containers:
              -  name:  catalog
                 image:  <ACR_NAME>.azurecr.io/catalog:1.0.0
                  ports:
                     -  containerPort:  8081
                  env:
                     -  name:  COSMOS_ENDPOINT
                         valueFrom:
                            secretKeyRef:
                                 name: cosmos-conn
                                 key: endpoint
                      -  name: COSMOS_KEY
                         valueFrom:
                             secretKeyRef:
                                name:  cosmos-conn
                                key:  key
                  readinessProbe:
                     httpGet:
                         path:  /healthz
                         port:  8081
                     initialDelaySeconds:  5
                     periodSeconds:  10
---
apiVersion:  v1
kind:  Service
metadata:
   name:  catalog
    namespace: archref
spec:
    selector:
       app: catalog
    ports:
       -  port: 8081
           targetPort:  8081
